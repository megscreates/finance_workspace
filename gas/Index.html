<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Crystal Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Poppins:wght@400;600;700&family=DM+Sans:wght@400;600;700&family=Space+Grotesk:wght@400;600;700&family=Karla:wght@400;700&display=swap" rel="stylesheet" />
    <?!= include('Styles'); ?>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  </head>
  <body class="theme-slate">
    <a class="sr-only" href="#contentArea">Skip to content</a>

    <header class="app-header">
      <div class="brand">
        <div class="logo" aria-hidden="true">ƒ</div>
        <div class="titles">
          <h1>Finance Workspace</h1>
          <p class="subtitle">Consolidated Dashboard (sample data)</p>
        </div>
      </div>
      <div class="header-actions">
        <form id="globalSearchForm" role="search">
          <label for="globalSearch" class="sr-only">Search</label>
          <input id="globalSearch" type="search" placeholder="Search clients, invoices, projects…" aria-label="Search the workspace" />
          <button class="btn-primary" type="submit" title="Search">Search</button>
        </form>
        <button id="openStudio" class="btn-tonal" type="button" title="Open Theme Studio">Theme Studio</button>
      </div>
    </header>

    <main class="workspace">
      <aside class="subnav" aria-label="Main Sections">
        <nav class="subnav" role="tablist" aria-label="Primary navigation">
          <button class="tab active" data-target="dashboard" aria-selected="true">Dashboard</button>
          <button class="tab" data-target="cash_page">Finance</button>
          <button class="tab" data-target="collections">Receivables</button>
          <button class="tab" data-target="payments">Payables</button>
          <button class="tab" data-target="projects">Projects</button>
          <button class="tab" data-target="service">Service</button>
          <button class="tab" data-target="dq">Data Quality</button>
          <button class="tab" data-target="search">Utilities</button>
          <button class="tab" data-target="admin">Admin</button>
        </nav>
      </aside>

      <section class="content" aria-live="polite">
        <nav id="pageTabs" class="tabs" role="tablist" aria-label="Section Pages"></nav>
        <div id="contentArea" class="content-body fade">
          <div class="pane">
            <section id="page-dashboard" class="page">
              <div class="section">
                <div class="section-header">
                  <h2>My Dashboard</h2>
                  <div class="row">
                    <span class="badge">Live Sample Data</span>
                    <span class="badge" data-tint="a">Theme-aware</span>
                  </div>
                </div>
                <div class="kpi-grid">
                  <div class="kpi">
                    <div class="kpi-label">Monthly Revenue</div>
                    <div class="kpi-value">$1.42M</div>
                    <div class="kpi-trend up">▲ 6.3% vs last month</div>
                    <div class="progress"><span id="kpiRevBar" style="width:0%"></span></div>
                  </div>
                  <div class="kpi">
                    <div class="kpi-label">Gross Margin</div>
                    <div class="kpi-value">38.4%</div>
                    <div class="kpi-trend up">▲ 1.1 pts</div>
                    <div class="progress"><span id="kpiGMBar" style="width:0%"></span></div>
                  </div>
                  <div class="kpi">
                    <div class="kpi-label">Open A/R</div>
                    <div class="kpi-value">$612k</div>
                    <div class="kpi-trend down">▼ –2.5% DSO</div>
                    <div class="progress"><span id="kpiARBar" style="width:0%"></span></div>
                  </div>
                  <div class="kpi">
                    <div class="kpi-label">On-time Pay</div>
                    <div class="kpi-value">92.1%</div>
                    <div class="kpi-trend up">▲ 0.9 pts</div>
                    <div class="progress"><span id="kpiOTPBar" style="width:0%"></span></div>
                  </div>
                </div>
              </div>

              <div class="widget-grid">
                <section class="widget span-2" aria-labelledby="w_rev_title">
                  <header class="widget-header">
                    <h3 id="w_rev_title" class="widget-title">Revenue Trend (12m)</h3>
                    <div class="widget-actions">
                      <span class="chip"><span class="dot a"></span>Actual</span>
                      <span class="chip"><span class="dot b"></span>Forecast</span>
                    </div>
                  </header>
                  <div class="widget-body" style="height:260px">
                    <canvas id="chartRevenueArea"></canvas>
                  </div>
                </section>

                <section class="widget" aria-labelledby="w_soc_title">
                  <header class="widget-header">
                    <h3 id="w_soc_title" class="widget-title">Social Growth</h3>
                    <span class="muted">6 months</span>
                  </header>
                  <div class="widget-body" style="height:260px">
                    <canvas id="chartSocialStack"></canvas>
                  </div>
                </section>

                <section class="widget span-2">
                  <header class="widget-header">
                    <h3 class="widget-title">Order List</h3>
                    <div class="segmented"><button>Monthly</button><button class="active">Weekly</button><button>Today</button></div>
                  </header>
                  <div class="table-wrap">
                    <table class="table">
                      <thead><tr><th>No.</th><th>ID</th><th>Date</th><th>Customer</th><th>Amount</th><th>Status</th><th>Action</th></tr></thead>
                      <tbody id="ordersBody"></tbody>
                    </table>
                  </div>
                </section>
              </div>
            </section>
          </div>
        </div>
      </section>
    </main>

    <!-- Theme Studio Drawer -->
    <aside class="studio-overlay" id="themeStudio" aria-hidden="true">
      <div class="studio-panel" role="dialog" aria-label="Theme Studio">
        <header class="studio-header">
          <h3>Theme Studio</h3>
          <div style="display:flex; gap:8px; align-items:center">
            <button class="btn" id="stSurprise" title="Generate a random theme">Surprise me!</button>
            <button class="btn reset" id="stReset">Reset</button>
            <button class="icon-btn small" id="closeStudio" title="Close">✕</button>
          </div>
        </header>

        <nav class="studio-nav">
          <a href="#sec-palettes">Palettes</a>
          <a href="#sec-colors">Colors</a>
          <a href="#sec-bg">Background</a>
          <a href="#sec-sidebar">Sidebar</a>
          <a href="#sec-typography">Type</a>
          <a href="#sec-strokes">Strokes</a>
          <a href="#sec-cards">Cards</a>
          <a href="#sec-presets">Presets</a>
        </nav>

        <details class="studio-section" id="sec-palettes" open>
          <summary>Quick Palettes</summary>
          <div class="studio-grid">
            <div class="preset-list span-2" id="stQuickPalettes"></div>
          </div>
        </details>

        <details class="studio-section" id="sec-colors" open>
          <summary>Colors</summary>
          <div class="studio-grid">
            <label>Primary <input type="color" id="stPrimary" value="#6f5cff"></label>
            <label>Outline <input type="color" id="stOutline" value="#12131a"></label>
          </div>
        </details>

        <details class="studio-section" id="sec-typography">
          <summary>Typography</summary>
          <div class="studio-grid">
            <label>Body Font
              <select id="stBodyFont">
                <option value="Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial">Inter</option>
                <option value="DM Sans, Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial">DM Sans</option>
                <option value="Poppins, Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial">Poppins</option>
                <option value="Space Grotesk, Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial">Space Grotesk</option>
                <option value="Karla, Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial">Karla</option>
              </select>
            </label>
            <label>Heading Font
              <select id="stHeadingFont">
                <option value="Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial">Inter</option>
                <option value="Poppins, Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial">Poppins</option>
                <option value="Space Grotesk, Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial">Space Grotesk</option>
                <option value="DM Sans, Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial">DM Sans</option>
                <option value="Karla, Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial">Karla</option>
              </select>
            </label>
            <label class="span-2">Text Scale <input type="range" id="stScale" min="0.9" max="1.2" step="0.01" value="1.00"></label>
          </div>
        </details>

        <details class="studio-section" id="sec-bg" open>
          <summary>Background</summary>
          <div class="studio-grid">
            <label>Type
              <select id="stBgType">
                <option value="solid">Solid</option>
                <option value="linear" selected>Linear</option>
                <option value="radial">Radial Mix</option>
              </select>
            </label>
            <label>Color 1 <input type="color" id="stBg1" value="#f6f6fb"></label>
            <label>Color 2 <input type="color" id="stBg2" value="#e7e4ff"></label>
            <label>Color 3 <input type="color" id="stBg3" value="#ffffff"></label>
            <label class="span-2">Angle <input type="range" id="stAngle" min="0" max="360" value="135"></label>
            <div class="bg-preview span-2" id="bgPreview"></div>
          </div>
        </details>

        <details class="studio-section" id="sec-strokes">
          <summary>Strokes & Corners</summary>
          <div class="studio-grid">
            <label>Line Thickness <input type="number" id="stLine" min="1" max="8" step="1" value="2"></label>
            <label>Corner Radius <input type="range" id="stRadius" min="6" max="28" step="1" value="16"></label>
            <label>Icon Stroke <input type="number" id="stIconStroke" min="1.5" max="3.5" step="0.1" value="2.0"></label>
            <label>Shadow Offset <input type="range" id="stShadow" min="0" max="12" step="1" value="6"></label>
            <label>Outline Style
              <select id="stOutlineStyle">
                <option value="solid" selected>Solid</option>
                <option value="dashed">Dashed</option>
              </select>
            </label>
            <label>Icon Edges
              <select id="stIconEdge">
                <option value="round" selected>Rounded</option>
                <option value="miter">Sharp</option>
              </select>
            </label>
          </div>
        </details>

        <details class="studio-section" id="sec-sidebar">
          <summary>Sidebar & Branding</summary>
          <div class="studio-grid">
            <label>Sidebar Type
              <select id="stSBgType">
                <option value="solid">Solid</option>
                <option value="linear" selected>Linear</option>
                <option value="radial">Radial Mix</option>
              </select>
            </label>
            <label>SB Color 1 <input type="color" id="stSBg1" value="#ffffff"></label>
            <label>SB Color 2 <input type="color" id="stSBg2" value="#e7e4ff"></label>
            <label>SB Color 3 <input type="color" id="stSBg3" value="#f6f6fb"></label>
            <label class="span-2">Angle <input type="range" id="stSBgAngle" min="0" max="360" value="180"></label>
            <div class="bg-preview span-2" id="stSBgPreview"></div>

            <label>Name Style
              <select id="stBrandType">
                <option value="solid" selected>Solid</option>
                <option value="gradient">Gradient</option>
              </select>
            </label>
            <label>Brand Color <input type="color" id="stBrandColor" value="#1f2346"></label>
            <label>Brand G1 <input type="color" id="stBrand1" value="#6f5cff"></label>
            <label>Brand G2 <input type="color" id="stBrand2" value="#5cc2ff"></label>
          </div>
        </details>

        <details class="studio-section" id="sec-headline">
          <summary>Headline (Greeting)</summary>
          <div class="studio-grid">
            <label>Style
              <select id="stHeadType">
                <option value="gradient" selected>Gradient</option>
                <option value="solid">Solid</option>
              </select>
            </label>
            <label>Head G1 <input type="color" id="stHead1" value="#6f5cff"></label>
            <label>Head G2 <input type="color" id="stHead2" value="#64d2ff"></label>
          </div>
        </details>

        <details class="studio-section" id="sec-cards">
          <summary>Cards & Panels</summary>
          <div class="studio-grid">
            <label>Card Fill
              <select id="stCardType">
                <option value="plain" selected>Plain</option>
                <option value="gradient">Gradient</option>
              </select>
            </label>
            <label>Card Color 1 <input type="color" id="stCard1" value="#ffffff"></label>
            <label>Card Color 2 <input type="color" id="stCard2" value="#f6f6fb"></label>
          </div>
        </details>

        <details class="studio-section" id="sec-presets">
          <summary>Presets</summary>
          <div class="studio-grid">
            <label class="span-2">Preset Name <input type="text" id="stPresetName" placeholder="e.g., Executive Indigo"></label>
            <button class="btn save" id="stSavePreset">Save Preset</button>
            <div class="preset-list span-2" id="stPresetList" aria-live="polite"></div>
          </div>
        </details>
      </div>
    </aside>

    <?!= include('Scripts'); ?>
  </body>
  </html>
